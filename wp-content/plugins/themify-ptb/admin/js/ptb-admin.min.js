var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,l,h){a instanceof String&&(a=String(a));for(var q=a.length,r=0;r<q;r++){var b=a[r];if(l.call(h,b,r,a))return{i:r,v:b}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,h){a!=Array.prototype&&a!=Object.prototype&&(a[l]=h.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,l,h,q){if(l){h=$jscomp.global;a=a.split(".");for(q=0;q<a.length-1;q++){var r=a[q];r in h||(h[r]={});h=h[r]}a=a[a.length-1];q=h[a];l=l(q);l!=q&&null!=l&&$jscomp.defineProperty(h,a,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,h){return $jscomp.findInternal(this,a,h).v}},"es6-impl","es3");
(function(a){function l(a){for(var b=window.location.search.substring(1).split("&"),d=0;d<b.length;d++){var e=b[d].split("=");if(e[0]===a)return e[1]}return!1}function h(b){a(function(){b.init&&b.init()});return b}h(function(){return{init:function(){a("#ptb-cpt-filter")}}}());h(function(){var b,c,d,e,n,f,g,k,p,m,h,w,u,v=function(b,d,e){var c="#"+d.type+"_\\{\\{id\\}\\}";if(0<a(c).length){var g=e?new RegExp(d.type+"_{{id}}","gi"):RegExp("{{id}}","gi"),c=a(c).clone()[0].outerHTML.replace(g,e?b:d.id),
c=a(c).appendTo(w),g=c.find("input[id^="+b+"_name_]"),f=c.find("input[id^="+b+"_description_]"),p=c.find("input[id^="+b+"_slug]");g.each(function(){var c=a(this).attr("id").replace(b+"_name_","");a(this).val(d.name[c])});f.each(function(){var c=a(this).attr("id").replace(b+"_description_","");a(this).val(d.description[c])});"undefined"===typeof k||""===k||e?p.val(b):p.val(k+"_"+b);e&&p.prop("readonly",!0);e=c.find(".ptb_cmb_item_body");r(c.find(".ptb_cmb_item_remove"));q(c.find(".ptb_cmb_item_collapse"));
a.event.trigger({type:"ptb_metabox_create",id:b,options:d,container:e});a.event.trigger({type:"ptb_metabox_create_"+d.type,id:b,options:d,container:e});c.data(b,d);return c}return!1},t=function(){var b=h.val();if(b){try{m=a.parseJSON(b),a.isArray(m)&&(m={})}catch(E){return}a.each(m,function(a,b){var d=v(a,b,1);d&&d.show()});w.sortable({placeholder:"ui-state-highlight"})}},x=function(a){return a.replace(/[^A-Za-z0-9_]+/g,"_").toLowerCase()},A=function(){m={};w.children().each(function(b,d){var c=d.id,
e=c,g=a("input[id^="+c+"_slug]");g&&!g.prop("readonly")&&(c=d.id=x(g.val()),a(d).find("input,select,.ptb_cmb_options_wrapper").each(function(){var b=a(this).prop("name"),d=a(this).prop("id");b&&a(this).prop("name",b.replace(e,c));d&&a(this).prop("id",d.replace(e,c))}),a("#"+e).prop("id",c));m[c]=a.data(d)[e];var g=a("input[id^="+c+"_name_]"),k=a("input[id^="+c+"_description]");m[c].name={};g.each(function(){var b=a(this).attr("id").replace(c+"_name_","");m[c].name[b]=a(this).val()});m[c].description=
{};k.each(function(){var b=a(this).attr("id").replace(c+"_description_","");m[c].description[b]=a(this).val()});a.event.trigger({type:"ptb_metabox_save_"+m[c].type,id:c,options:m[c]})});h.val(JSON.stringify(m));w.find("[name]").removeAttr("name");a(".ptb_cmb_item_wrapper").find("[name]").removeAttr("name")},B=function(b){var c=a.map(m,function(a){if(a.type===b)return a.id}),c=c.filter(function(a){return 0<a});(c=0===c.length?0:Math.max.apply(null,c))||(c=0);return c+1},q=function(b){a(b).on("click",
function(b){a(this).toggleClass("ti-angle-down");a(this).parent().next().toggle("blind",500)})},r=function(b){a(b).on("click",function(b){b=a(this).parents(".ptb_cmb_item_wrapper");var c=b.attr("id");b.hide("blind",500);b.data(c).deleted=!0})},C=function(){u.hide();a(".ptb_cmb_add_field").hover(function(a){u.is(":visible")||u.show()}).mouseleave(function(a){u.data("timeout",setTimeout(function(){u.hide()},150))});u.mouseenter(function(b){clearTimeout(a(this).data("timeout"))}).mouseleave(function(a){clearTimeout(u.data("timeout"));
u.data("timeout",setTimeout(function(){u.hide()},150))});u.children().each(function(b,c){var d=a(this).data("type");a(c).on("click",function(b){b.preventDefault();a.event.trigger({type:"ptb_add_metabox"});a.event.trigger({type:"ptb_add_metabox_"+d})});a(document).on("ptb_add_metabox_"+d,function(a){a=a.result||{};var b=B(d),c=d+"_"+b;a.type=d;a.id=b;a.deleted=!1;a.name="";a.description="";m[c]=a;v(c,a,!1).hide().show("blind",500);w.sortable("refresh")})})},D=function(){var b=a("form"),t;if("add"===
l("action"))c.on("keyup change",function(){k=a(this).val().replace(/[^A-Za-z0-9_]+/g,"-").toLowerCase();d.val()!==k&&(d.val(k).change(),n.val(k))});d.on("change",function(){k=a(this).val();if(g!==k||""===k)clearTimeout(t),t=setTimeout(function(){z(k)},250)});a("body").on("focusout",e,function(b){if(a(this).prop("readonly"))a(this).off("focusout");else{var c=x(a(this).val());a(this).val(c);a(".ptb_meta_slug_error").removeClass("ptb_meta_slug_error");y(a(this).data("prev_value")+" already exists",!1);
if(c){var d=!1,g=a(this).prop("id");a(e).each(function(){a(this).val()===c&&g!==a(this).prop("id")&&(a(this).addClass("ptb_meta_slug_error"),d=1)});d?(y(c+" already exists",!0),a(this).addClass("ptb_meta_slug_error").data("prev_value",c)):a(this).data("ptb_focus",1)}else a(this).val(a(this).closest(".ptb_cmb_item_wrapper").prop("id")).trigger("focusout")}}).on("focusout",f,function(){var b=a(this).closest(".ptb_cmb_item_wrapper").prop("id");a("#"+b+"_slug").prop("readonly")||a("#"+b+"_slug").data("ptb_focus")?
a(this).off("focusout"):"undefined"!==typeof k&&""!==k?a("#"+b+"_slug").val(k+"_"+x(a(this).val())).trigger("focusout"):a("#"+b+"_slug").val(x(a(this).val())).trigger("focusout")});b.submit(function(b){var c=!0;p.find("p").remove();if(""===k||g!==k)c=!z(k,!1);var d=[];a("input[id^=ptb_cpt_singular_label_],input[id^=ptb_cpt_plural_label_]").each(function(){if(!a.trim(a(this).val())){c=!1;var b=a(this).closest("tr").find("label").text();d[b]||(y(b+" can't be empty",!0),d[b]=1)}});a(e).trigger("focusout");
0<a(".ptb_meta_slug_error").length&&(c=!1);c?A():(a("html, body").animate({scrollTop:0},"slow"),b.preventDefault())});b.find(".ptb-collapse + table").each(function(){a(this).hide().find("th").first().attr("colspan",2)});b.find("table").after('<div class="ptb-collapse-separator"></div>');var b=b.find(".ptb-collapse"),m=b.prev("h2");0===m.length&&(m=b.prev("h3"));m.addClass("ptb-collapse-title").prepend('<span class="ti-plus circle"></span>').click(function(){a(this).nextAll("table").first().toggle("blind",
500)})},z=function(b,c){c="undefined"!==typeof c?c:!0;var d=!0;a.ajax({type:"POST",url:ajaxurl,data:{action:"ptb_ajax_post_type_name_validate",nonce:a.trim(a("#ptb-ajax-notification-nonce").text()),slug:b},async:c,success:function(b){d=a.trim(b)?!0:!1;y(b,d)}});return d},y=function(a,b){if(b)0===p.find("p:contains("+a+")").length&&p.append("<p>"+a+"</p>"),p.fadeIn();else if(0===p.find("p").length||a)a?(p.find("p:contains("+a+")").remove(),0===p.find("p").length&&p.fadeOut("fast")):p.fadeOut("fast")};
return{init:function(){b=a("#ptb_cpt_id");if(0===b.length)var m=!1;else c=a("#ptb_cpt_singular_label_"+ptb_js.lng),d=a("#ptb_cpt_slug"),e=".ptb_cmb_items_wrapper .ptb_cmb_slug",f='.ptb_cmb_items_wrapper .ptb_active_lng.ptb_meta_name input[type="text"]',n=a("#ptb_cpt_rewrite_slug"),p=a("#ptb_ajax_message"),g=b.val(),k=d.val(),h=a("#ptb_post_type_cmb_data"),w=a(".ptb_cmb_items_wrapper"),u=a(".ptb_cmb_buttons_wrapper"),m=!0;m&&(C(),t(),D())}}}());h(function(){return{init:function(){a("#ptb-ctx-filter")}}}());
h(function(){var b,c,d,e,n,f=function(){var b=a("form"),f;if("add"===l("action"))a("#ptb_ctx_singular_label_"+ptb_js.lng).on("keyup keypress blur change",function(){e=a(this).val().replace(/[^A-Za-z0-9_]+/g,"_").toLowerCase();c.val()!==e&&c.val(e).change()});c.on("change",function(){e=a(this).val();if(d!==e||""===e)clearTimeout(f),f=setTimeout(function(){g(e)},250)});b.submit(function(b){var c=!0;n.find("p").remove();if(""===e||d!==e)c=!g(e,!1);var f=[];a("input[id^=ptb_ctx_singular_label_],input[id^=ptb_ctx_plural_label_]").each(function(){if(!a.trim(a(this).val())){c=
!1;var b=a(this).closest("tr").find("label").text();f[b]||(k(b+" can't be empty",!0),f[b]=1)}});c||(a("html, body").animate({scrollTop:0},"slow"),b.preventDefault())});b.find(".ptb-collapse + table").hide();b.find("table").after('<div class="ptb-collapse-separator"></div>');var b=b.find(".ptb-collapse"),h=b.prev("h2");0===h.length&&(h=b.prev("h3"));h.addClass("ptb-collapse-title").prepend('<span class="ti-plus circle"></span>').click(function(){a(this).nextAll("table").first().toggle("blind",500)})},
g=function(b,c){c="undefined"!==typeof c?c:!0;var d=!0;a.ajax({type:"POST",url:ajaxurl,data:{action:"ptb_ajax_taxonomy_name_validate",nonce:a.trim(a("#ptb-ajax-notification-nonce").text()),slug:b},async:c,success:function(b){d=a.trim(b)?!0:!1;k(b,d)}});return d},k=function(a,b){b?(n.append("<p>"+a+"</p>"),n.fadeIn()):0===n.find("p").length&&n.fadeOut("fast")};return{init:function(){b=a("#ptb_ctx_id");c=a("#ptb_ctx_slug");a("input[name^=ptb_ctx_singular_label_]");if(0===b.length)var g=!1;else n=a("#ptb_ajax_message"),
d=b.val(),e=c.val(),g=!0;g&&f()}}}());h(function(){var b,c,d,e,n,f,g,k,p,m=function(b,c){var p=e.clone().appendTo(d),t=n.clone().prependTo(p),m=f.clone().appendTo(t),t=g.clone().appendTo(t),l=k.clone().appendTo(p);a.event.trigger({type:"ptb_template_item_create",id:b,options:c,container:l});a.event.trigger({type:"ptb_template_item_create_"+c.type,id:b,options:c,title:m,container:l});p.data(b,c).attr("id",b);h(t);return p},h=function(b){a(b).on("click",function(b){b=a(this).parents(".ptb_template_item_wrapper");
var c=b.attr("id");b.hide(500).data(c).deleted=!0})},q=function(){var c=a.map(b,function(a,b){return a.id}),c=c.filter(function(a){return 0<a});(c=0===c.length?0:Math.max.apply(null,c))||(c=0);return c+1},u=function(){p.children().each(function(c,e){var g=a(this).data("type");a(e).on("click",function(c){c.preventDefault();c=q();var e=g+"_"+c;b[e]={id:c,type:g,deleted:!1,name:a(this).text(),meta_key:a(this).data("meta-key")};m(e,b[e]).hide().show(500);d.sortable("refresh")})})},v=function(){var b=
!0;a("a.ptb_lightbox").click(function(c){c.preventDefault();if(!0===b){var d=a(this);a.ajax({url:ajaxurl,beforeSend:function(){b=!1},data:{action:"ptb_ajax_themes","ptb-ptt":l("ptb-ptt"),template:d.data("template-type")},success:function(a){a&&(openLightBox(c,d.attr("title"),a,!1,!1),b=!0)}})}})};return{init:function(){if(0===a("#ptb_ptt_id").length)var t=!1;else c=a("#ptb_ptt_archive").length?a("#ptb_ptt_archive"):a("#ptb_ptt_single"),d=a("ul.ptb_template_items_wrapper"),e=a('<li class="ptb_template_item_wrapper"></li>'),
n=a('<div class="ptb_template_item_title_wrapper"></div>'),f=a('<h4 class="ptb_template_item_title"></h4>'),g=a('<button type="button" class="ptb_template_item_remove" aria-label="Remove"><span aria-hidden="true">&times;</span></button>'),k=a('<div class="ptb_template_item_body"></div>'),p=a(".ptb_template_buttons_wrapper"),t=!0;if(t)a:if(v(),u(),t=c.val()){try{b=a.parseJSON(t),a.isArray(b)&&(b={})}catch(x){break a}a.each(b,m);d.sortable({placeholder:"ui-state-highlight"});d.disableSelection();h()}}}}());
h(function(){var b,c=function(){var c,e;b.children().each(function(){c=a(this);e=c.attr("id");a.event.trigger({type:"ptb_post_cmb_"+c.data("ptb-cmb-type")+"_handle",id:e,cmbItem:c});a.event.trigger({type:"ptb_post_cmb_"+c.data("ptb-cmb-type")+"_body_handle",id:e,cmbItemBody:c.find(".ptb_post_cmb_body_wrapper")})})};return{init:function(){b=a(".ptb_post_cmb_wrapper");0!==b.length&&c()}}}());a(document).on("ptb_metabox_create_text",function(b){var c=b.container.find("input[id^="+b.id+"_default_value_]"),
d=b.options.repeatable?"yes":"no";c.each(function(){var c=a(this).attr("id").replace(b.id+"_default_value_","");a(this).val(b.options.defaultValue[c])});a("#"+b.id+"_repeatable_"+d).prop("checked",!0)}).on("ptb_add_metabox_text",function(a){return{defaultValue:"",repeatable:!1}}).on("ptb_metabox_save_text",function(b){b.options.defaultValue={};a("input[id^="+b.id+"_default_value_]").each(function(){var c=a(this).attr("id").replace(b.id+"_default_value_","");b.options.defaultValue[c]=a(this).val()});
b.options.repeatable=0<a("#"+b.id+"_repeatable_yes:checked").length}).on("ptb_post_cmb_text_body_handle",function(b){function c(b){b.preventDefault();b.data.item.hide("blind",500,function(){a(this).remove()})}var d=b.cmbItemBody.find(".ptb_cmb_options_wrapper");if(0===d.length)return!1;var e=d.children().first().clone();d.sortable({placeholder:"ui-state-highlight"});b.cmbItemBody.find(".ptb_cmb_option_add").click({wrapper:d},function(a){var f=e.clone();f.appendTo(d).hide().show("blind",500);f.find('input[name="'+
b.id+'[]"]').val("");f.find("."+b.id+"_remove").click({item:f},c);a.data.wrapper.sortable("refresh")});d.children().each(function(){var d=a(this);d.find("."+b.id+"_remove").click({item:d},c)})}).on("ptb_metabox_create_email",function(a){a.container.find("input[id^="+a.id+"_default_value]").val(a.options.defaultValue)}).on("ptb_add_metabox_email",function(a){return{defaultValue:""}}).on("ptb_metabox_save_email",function(b){b.options.defaultValue=a.trim(a("input[id^="+b.id+"_default_value]").val())}).on("ptb_metabox_create_number",
function(b){b.options.range&&a("#"+b.id+"_range").prop("checked",!0)}).on("ptb_add_metabox_number",function(a){return{range:!1}}).on("ptb_metabox_save_number",function(b){b.options.range=a("input[id^="+b.id+"_range]:checked").val()}).on("ptb_metabox_create_textarea",function(b){b.container.find("input[id^="+b.id+"_default_value_]").each(function(){var c=a(this).attr("id").replace(b.id+"_default_value_","");a(this).val(b.options.defaultValue[c])});b.options.editor&&a("#"+b.id+"_editor").prop("checked",
!0)}).on("ptb_add_metabox_textarea",function(a){return{defaultValue:"",editor:!1}}).on("ptb_metabox_save_textarea",function(b){b.options.defaultValue={};a("input[id^="+b.id+"_default_value_]").each(function(){var c=a(this).attr("id").replace(b.id+"_default_value_","");b.options.defaultValue[c]=a(this).val()});b.options.editor=a("#"+b.id+"_editor").is(":checked")}).on("ptb_metabox_create_radio_button",function(b){function c(b){b.preventDefault();b.data.option.hide("blind",500,function(){a(this).remove()})}
function d(b){b=a(b.data.option.selector).find('input[name^="'+b.data.id+'_options_"]').map(function(){return a(this).data("id")});b=b.filter(function(a){return 0<a});(b=0===b.length?0:Math.max.apply(null,b))||(b=0);return++b}function e(b){a(b.data.label.selector).remove();a(b.data.selector).attr("checked",!1);a(this).attr("checked",!0).after(b.data.label)}var n=b.container.find("."+b.id+"_option_wrapper"),f=b.container.find("#"+b.id+"_options_wrapper");n.remove();a.each(b.options.options,function(d,
k){var g=n.clone();g.appendTo(f);g.find('input[name^="'+b.id+'_options_"]').each(function(){var c=a(this).attr("name").replace(b.id+"_options_",""),c=c.replace("[]",""),c=k[c]?k[c]:k.name,d=a.isNumeric(k.id)?k.id:k.id.replace(b.id+"_","");a(this).val(c).attr("id",b.id+"_"+d).data("id",d)});g.find("."+b.id+"_remove").click({option:g},c);var m=g.find('input[name="'+b.id+'_default_selected"]'),g=g.find("."+b.id+"_default_selected_label");k.selected||g.remove();m.attr("checked",k.selected).click({label:g,
selector:m.selector},e)});f.sortable({placeholder:"ui-state-highlight"});b.container.find("#"+b.id+"_add_new").click({id:b.id,option:n,wrapper:f},function(a){a.preventDefault();var b=a.data.option.clone(),f=b.find('input[name="'+a.data.id+'_default_selected"]'),g=b.find("."+a.data.id+"_default_selected_label");f.click({label:g,selector:f.selector},e);var n=d(a);b.find('input[name^="'+a.data.id+'_options_"]').val("").attr("id",a.data.id+"_"+n).data("id",n);f.attr("checked",!1);g.remove();b.find("."+
a.data.id+"_remove").click({option:b},c);b.appendTo(a.data.wrapper).hide().show("blind",500);a.data.wrapper.sortable("refresh")})}).on("ptb_add_metabox_radio_button",function(a){return{options:[{name:"Option 1",id:1,selected:!0},{name:"Option 2",id:2,selected:!1}]}}).on("ptb_metabox_save_radio_button",function(b){b.options.options={};a("#"+b.id+"_options_wrapper").children("li").each(function(c){var d=a(this).find("input[name^="+b.id+"_options_]"),e=a(this).find("input[name^="+b.id+"_default_selected]").is(":checked");
b.options.options[c]={};d.each(function(){var d=a(this).attr("name").replace(b.id+"_options_",""),d=d.replace("[]","");b.options.options[c][d]=a(this).val();b.options.options[c].selected=e;b.options.options[c].id=a(this).attr("id")})})}).on("ptb_metabox_create_checkbox",function(b){function c(b){b=a(b.data.option.selector).find('input[name^="'+b.data.id+'_options_"]').map(function(){return a(this).data("id")});b=Math.max.apply(null,b);return++b}function d(b){b.preventDefault();b.data.option.hide("blind",
500,function(){a(this).remove()})}var e=b.container.find("."+b.id+"_option_wrapper"),n=b.container.find("#"+b.id+"_options_wrapper");e.remove();a.each(b.options.options,function(c,g){var f=e.clone();f.appendTo(n);f.find('input[name^="'+b.id+'_options_"]').each(function(){var c=a(this).attr("name").replace(b.id+"_options_",""),c=c.replace("[]",""),c=g[c]?g[c]:g.name,d=a.isNumeric(g.id)?g.id:g.id.replace(b.id+"_","");a(this).val(c).attr("id",b.id+"_"+d).data("id",d)});f.find("."+b.id+"_remove").click({option:f},
d);f.find('input[name="'+b.id+'_default_checked"]').attr("checked",g.checked)});n.sortable({placeholder:"ui-state-highlight"});b.container.find("#"+b.id+"_add_new").click({id:b.id,option:e,wrapper:n},function(a){a.preventDefault();var b=a.data.option.clone(),e=c(a);b.find('input[name^="'+a.data.id+'_options_"]').val("").attr("id",a.data.id+"_"+e).data("id",e);b.find('input[name="'+a.data.id+'_default_checked"]').attr("checked",!1);b.find("."+a.data.id+"_remove").click({option:b},d);b.appendTo(a.data.wrapper).hide().show("blind",
500);a.data.wrapper.sortable("refresh")})}).on("ptb_add_metabox_checkbox",function(a){return{options:[{name:"Option 1",id:1,checked:!1},{name:"Option 2",id:2,checked:!1}]}}).on("ptb_metabox_save_checkbox",function(b){b.options.options={};a("#"+b.id+"_options_wrapper").children("li").each(function(c){var d=a(this).find("input[name^="+b.id+"_options_]"),e=a(this).find("input[name^="+b.id+"_default_checked]").is(":checked");b.options.options[c]={};d.each(function(){var d=a(this).attr("name").replace(b.id+
"_options_",""),d=d.replace("[]","");b.options.options[c][d]=a(this).val();b.options.options[c].checked=e;b.options.options[c].id=a(this).attr("id")})})}).on("ptb_metabox_create_select",function(b){function c(b){b=a(b.data.option.selector).find('input[name^="'+b.data.id+'_options_"]').map(function(){return a(this).data("id")});b=Math.max.apply(null,b);return++b}function d(b){b.preventDefault();b.data.option.hide("blind",500,function(){a(this).remove()})}b.container.find('input[name="'+b.id+'_multiple_selects"]').filter('[value="'+
(b.options.multipleSelects?"Yes":"No")+'"]').attr("checked",!0);var e=b.container.find("."+b.id+"_option_wrapper"),n=b.container.find("#"+b.id+"_options_wrapper");e.remove();a.each(b.options.options,function(c,g){var k=e.clone();k.appendTo(n);k.find('input[name^="'+b.id+'_options_"]').each(function(){var c=a(this).attr("name").replace(b.id+"_options_",""),c=c.replace("[]",""),c=g[c]?g[c]:g.name,d=a.isNumeric(g.id)?g.id:g.id.replace(b.id+"_","");a(this).val(c).attr("id",b.id+"_"+d).data("id",d)});
k.find("."+b.id+"_remove").click({option:k},d)});n.sortable({placeholder:"ui-state-highlight"});b.container.find("#"+b.id+"_add_new").click({id:b.id,option:e,wrapper:n},function(a){a.preventDefault();var b=a.data.option.clone(),e=c(a);b.find('input[name^="'+a.data.id+'_options_"]').val("").attr("id",a.data.id+"_"+e).data("id",e);b.find("."+a.data.id+"_remove").click({option:b},d);b.appendTo(a.data.wrapper).hide().show("blind",500);a.data.wrapper.sortable("refresh")})}).on("ptb_add_metabox_select",
function(a){return{multipleSelects:!1,options:[{name:"Option 1",id:1},{name:"Option 2",id:2}]}}).on("ptb_metabox_save_select",function(b){b.options.multipleSelects="Yes"===a('input[name="'+b.id+'_multiple_selects"]:checked').val();b.options.options={};a("#"+b.id+"_options_wrapper").children("li").each(function(c){var d=a(this).find("input[name^="+b.id+"_options_]");b.options.options[c]={};d.each(function(){var d=a(this).attr("name").replace(b.id+"_options_",""),d=d.replace("[]","");b.options.options[c][d]=
a(this).val();b.options.options[c].id=a(this).attr("id")})})}).on("ptb_post_cmb_image_body_handle",function(b){a('input[name="'+b.id+'[]"][type="text"]').on("paste keyup keypress change",function(c){var d=a(this);a('input[name="'+b.id+'[]"][type="hidden"]').val("");setTimeout(function(){a("#image_"+b.id).css("background-image","url("+d.val()+")")},100)});var c;a("#image_"+b.id).on("click",function(d){d.preventDefault();c||(c=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),
button:{text:a(this).data("uploader_button_text")},library:{type:"image"},multiple:!1}),c.on("select",function(){var d=c.state().get("selection").first().toJSON();a('input[name="'+b.id+'[]"][type="hidden"]').val(d.id);a('input[name="'+b.id+'[]"][type="text"]').val(d.url);a("#image_"+b.id).css("background-image","url("+d.url+")")}));c.open()})});var q="text textarea radio_button checkbox select image link_button".split(" "),r;for(r in q)a(document).on("ptb_template_item_create_"+q[r],function(a){a.title.html(a.options.name)});
a(document).on("ptb_template_item_create_title",function(a){a.title.html("Title")}).on("ptb_template_item_create_content",function(a){a.title.html("Content")});h(function(){var b,c,d,e,n,f,g,k,h,m=function(){c.click(function(b){b.preventDefault();k=a("a.nav-tab-active").data("target");switch(k){case "cpt":b=e;break;case "ctx":b=n;break;case "ptt":b=f;break;default:b=e}b={mode:h,target:k,list:b.find("input:checked").map(function(){return a(this).val()}).get()};a('input[name="ptb_plugin_options[ptb_ie_export]"]').val(JSON.stringify(b));
a("form#ptb_form_export").submit()})},l=function(){d.addClass("disabled");a("input:file").change(function(){a(this).val()?d.removeClass("disabled"):d.addClass("disabled")});d.click(function(b){b.preventDefault();a("input:file").val()&&a("form#ptb_form_import").submit()})},q=function(){a(".nav-tab-wrapper a").click(function(b){b.preventDefault();a(this).hasClass("nav-tab-active")||(a(this).addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),b=a(this).attr("href"),a(".ptb_tab_content").not(b).css("display",
"none"),a(b).fadeIn())})},u=function(){g.change(function(a){v()})},v=function(){h=g.filter(":checked").val();var b=a('a[href="#ptb_export_cpt_list"]').siblings();"linked"===h?b.fadeOut().click():b.fadeIn()};return{init:function(){b=a("form#ptb_form_export");if(0===b.length)var k=!1;else g=a('input[name="ptb_export_mode"]'),v(),c=a("#ptb_export"),d=a("#ptb_import"),e=a("#ptb_export_cpt_list"),n=a("#ptb_export_ctx_list"),f=a("#ptb_export_ptt_list"),k=!0;k&&(u(),q(),m(),l())}}}());a(function(){a(document).ready(function(){a(".ptb_interface select").wrap("<div class='ptb_custom_select'></div>");
a(".ptb_number").keyup(function(){/^[1-9][0-9]*[.,]*[0-9]*$/gi.test(a(this).val())||a(this).val(a(this).val().replace(/[^0-9.,]/,""))});a(document).on("click",".ptb_remove_dialog_form input",function(b){b.preventDefault();b.stopPropagation();b=a(this).closest("form");var c=a(this).data("confirm");if(c&&!confirm(c))return!1;a('input[name="remove"]',b).val(c?"1":"0");var d=a(".ptb_alert",b);a.ajax({type:"POST",url:ajaxurl,dataType:"json",data:b.serialize(),beforeSend:function(){d.removeClass("done error").addClass("busy").show()},
complete:function(){d.removeClass("busy")},success:function(a){if(a){var b="";if(a.success){b="done";var c=function(){"1"==a.data?window.location.reload():window.location=a.data}}else b="error",c=function(){a.data&&alert(a.data)};d.addClass(b);setTimeout(function(){d.animate({opacity:0},300,c)},800)}}})}).on("click",".ptb_register,.ptb_unregister,.ptb_cpt_copy,.ptb_ctx_copy",function(b){b.preventDefault();b.stopPropagation();a.ajax({type:"POST",url:this,dataType:"json",success:function(a){a&&("1"==
a.data?window.location.reload():window.location=a.data)}})})})});PTB_Layout={init:function(){var b=a("#ptb_pre_wrapper"),c=this;0<b.length&&a.getJSON("https://themify.me/ptb-layouts/index.json").done(function(a){if(a){var d="",h;for(h in a)d+="<li>",d+='<div class="ptb_pre_overlay" style="background-image:url('+a[h].img+')"></div>',d+='<div class="ptb_pre_content"><a class="ptb_pre_zoom ti-search" href="'+a[h].url+'"></a>',d+='<div class="ptb_pre_import"><a target="_blank" href="'+a[h].url+'">'+a[h].title+
"</a>",d+='<div class="ptb_pre_actions"><label><input type="checkbox" value="'+h+'" name="sample" />'+ptb_js.import_samples+"</label>",d+='<input class="ptb_pre_import_btn" type="button" data-slug="'+h+'" value="'+ptb_js["import"]+'" />',d+="</div></div></div></li>";a=b.find("ul");a.empty();a[0].insertAdjacentHTML("afterbegin",d);c.preview();c["import"]()}})},preview:function(){a(".ptb_pre_zoom").click(function(b){b.preventDefault();openLightBox(b,"",'<iframe id="ptb_preview_iframe" src="'+a(this).prop("href")+
'"></iframe>',"ptb_preview_iframe_wrapper")})},progress:function(b,c,d,e){"loading"===b&&document.body.insertAdjacentHTML("beforeend",'<div id="ptb_pre_progress_wrap" class="ptb_admin_lightbox"><div class="ptb_pre_progress"><div class="ptb_pre_progress_indicator">0%</div></div><div class="ptb_pre_progress_info"></div><div class="ptb_pre_progress_count"></div></div><div class="ptb_overlay"></div>');d&&e&&a(".ptb_pre_progress_count").html(d+" / "+e);void 0!==ptb_js.import_pre[b]&&(b=ptb_js.import_pre[b],
c&&(b=b.replace("%s",c)),a(".ptb_pre_progress_info").html(b))},setIndicator:function(b){b+="%";a(".ptb_pre_progress").css("width",b).find(".ptb_pre_progress_indicator").html(b)},"import":function(){var b=this;a(".ptb_pre_import_btn").click(function(c){c.preventDefault();var d=a(this).data("slug");c=a(this).closest("#ptb_pre_wrapper").data("cpt");if(-1===a.inArray(d,c)||confirm(ptb_js.confirm_import.replace("%s",d))){b.progress("loading");var e=a(this).closest(".ptb_pre_actions").find('input[type="checkbox"]').is(":checked");
b.setIndicator(10);a.getJSON("https://themify.me/ptb-layouts/"+d+".json").done(function(c){if(c){var h=function(e){b.setIndicator(80);b.progress("saving");return a.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{slug:d,cpt:JSON.stringify(c),action:"ptb_import_pre_cpt",samples:e?JSON.stringify(e):""},success:function(c){c&&c.status?(b.setIndicator(100),b.progress("finish")):alert("Something goes wrong");setTimeout(function(){a("#ptb_pre_progress_wrap,.ptb_overlay").remove();c.status&&setTimeout(function(){window.location.reload()},
100)},2E3)}})};b.progress("cpt",d);b.setIndicator(e?20:45);if(e){b.progress("start_samples");var g,k=1,l;var m=[];var n=0,q=function(){a.ajax({url:"https://themify.me/demo/themes/post-type-builder/wp-json/wp/v2/"+d+"?statuses=public&per_page=5&page="+k,dataType:"json",crossDomain:!0,success:function(a,c,d){var e;if("success"===c&&a){g||(g=d.getResponseHeader("X-WP-TotalPages"),l=d.getResponseHeader("X-WP-Total"));b.setIndicator(20+5*k);b.progress(null,null,5*k,l);var f=0;for(e=a.length;f<e;++f){c=
{};if(a[f].ptb_taxonomy){d=a[f].ptb_taxonomy;for(var p in d){c[p]={};for(var r=0,u=d[p].length;r<u;++r)c[p][d[p][r].slug]=d[p][r].name}}a[f].ptb_featured_image&&++n;b.progress("samples",a[f].title.rendered);m.push({title:a[f].title.rendered,excerpt:a[f].excerpt.rendered,content:a[f].content.rendered,meta:a[f].ptb_metabox?a[f].ptb_metabox:null,tax:c,img:a[f].ptb_featured_image?a[f].ptb_featured_image:null})}++k;if(k!=g)setTimeout(q,800);else{b.progress("start_images",null,l,l);b.setIndicator(50);k=
l=g=null;f=0;e=m.length;var t=function(){if(m[f].img){b.progress(null,null,f,n-1);var a=new XMLHttpRequest;b.progress("images",m[f].img.url);b.setIndicator(50+f);a.open("GET",m[f].img.url,!0);a.responseType="blob";a.onload=function(b){if(200===this.status){b=new FormData;var c=new XMLHttpRequest;b.append("file",this.response);m[f].img.title&&b.append("title",m[f].img.title);m[f].img.caption&&b.append("caption",m[f].img.caption);c.responseType="json";c.open("POST",ajaxurl+"?action=ptb_upload_blob",
!0);c.onload=function(a){this.response.id&&(m[f].img=this.response.id);++f;f<e?setTimeout(t,300):h(m)};c.send(b);b=a=null}};a.onerror=function(a){alert("Cant`t Load the image "+m[f].url)};a.send()}else++f,f<e&&setTimeout(t,300)};t()}}},error:function(){alert("Can't get samples")}})};q()}else h(null)}})}})}}})(jQuery);
jQuery(document).ready(function(){InitLanguageTabs();ThemplateDelete();var a=jQuery;PTB_Layout.init();a("body").on("click","a.ptb_custom_lightbox",function(l){l.preventDefault();l.stopPropagation();a(".ptb_current_ajax").removeClass("ptb_current_ajax");a(this).addClass("ptb_current_ajax");var h=a(this);a.ajax({url:this,success:function(a){a&&openLightBox(l,h.attr("title"),a,h.data("class"),h.data("top"))}})}).on("ptb_pre_layout_update",function(){PTB_Layout.init()})});
var InitLanguageTabs=function(){var a=jQuery;a("body").on("click",".ptb_language_tabs li",function(l){l.preventDefault();if(!a(this).hasClass("ptb_active_tab_lng")){l=a(this).closest("ul");var h=l.next("ul");l.find(".ptb_active_tab_lng").removeClass("ptb_active_tab_lng");a(this).addClass("ptb_active_tab_lng");h.find(".ptb_active_lng").removeClass("ptb_active_lng");h.find("li").eq(a(this).index()).addClass("ptb_active_lng")}})},ThemplateDelete=function(){jQuery(".templates .delete a").click(function(a){confirm(ptb_js.template_delete)||
a.preventDefault()})},lightboxCloseKeyListener=function(a){27===a.keyCode&&(a.preventDefault(),closeLightBox(a))},openLightBox=function(a,l,h,q,r){a.preventDefault();var b=jQuery,c="ptb_"+Math.random().toString(36).substr(2,9);l='<div id="'+c+'" class="ptb_admin_lightbox ptb_icon_lightbox ptb_interface"><div class="ptb_lightbox_title">'+(l?l:"")+'</div><a href="#" class="ptb_close_lightbox">\u00d7</a><div id="ptb_lightbox_container"><div class="ptb_lightbox_inner">'+h+'</div></div></div><div class="ptb_overlay"></div>';
b(document).on("keyup",lightboxCloseKeyListener);b("body").append(l);var d=b("#"+c);q&&d.addClass(q);d.show();setTimeout(function(){d.addClass("ptb_lightbox_show").one("transitionend webkitTransitionEnd oTransitionEnd",function(){b.event.trigger("PTB.openlightbox",[a,c])}).find(".ptb_close_lightbox").click(closeLightBox)},100)},closeLightBox=function(a){a.preventDefault();var l=jQuery;a=l(this).closest(".ptb_admin_lightbox");l(document).off("keyup",lightboxCloseKeyListener);l.event.trigger("PTB.close_lightbox",
this);a.removeClass("ptb_lightbox_show").one("transitionend webkitTransitionEnd oTransitionEnd",function(){l(this).next(".ptb_overlay").remove();l(this).remove()})};
