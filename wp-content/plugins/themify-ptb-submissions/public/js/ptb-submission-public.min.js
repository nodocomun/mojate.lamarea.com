var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,g,f){a instanceof String&&(a=String(a));for(var h=a.length,n=0;n<h;n++){var q=a[n];if(g.call(f,q,n,a))return{i:n,v:q}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,f){a!=Array.prototype&&a!=Object.prototype&&(a[g]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,f,h){if(g){f=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var n=a[h];n in f||(f[n]={});f=f[n]}a=a[a.length-1];h=f[a];g=g(h);g!=h&&null!=g&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var g=0;return $jscomp.iteratorPrototype(function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,g){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,h={next:function(){if(f<a.length){var n=f++;return{value:g(n,a[n]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a){function g(a){var b=+Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,b)).toFixed(b?1:0)+" "+["n/a","B","KB","MB"][isNaN(a)?0:b+1]}var f={},h={},n=function(){a(document).on("click",".ptb_language_tabs li",function(c){c.preventDefault();if(!a(this).hasClass("ptb_active_tab_lng")){c=a(this).closest("ul");var b=c.next("ul");c.find(".ptb_active_tab_lng").removeClass("ptb_active_tab_lng");a(this).addClass("ptb_active_tab_lng");b.find(".ptb_active_lng").removeClass("ptb_active_lng");
b.find("li").eq(a(this).index()).addClass("ptb_active_lng")}})},q=function(c){c.each(function(){var b=a(this).closest(".ptb-submission-text-option"),b=0<b.length?b:a(this).closest(".ptb_module"),c=a(this).closest("form"),m=a(this).data("extension")?new RegExp("(\\.|/)("+a(this).data("extension")+")$","i"):/(\.|\/)(gif|jpe?g|png)$/i,e=a(this).data("size"),k=a(this).data("width"),d=a(this).data("height"),u=b.find(".ptb-submission-priview"),p=a(this);a(this).fileupload({url:c.attr("action"),type:"POST",
acceptFileTypes:m,maxFileSize:e,dataType:"json",singleFileUploads:!0,autoUpload:!1,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:k?k:100,previewMaxHeight:d?d:100,previewCrop:!0}).on("fileuploadprocessalways",function(b,c){var d=c.files[c.index],e=a('.ptb-submission-upload-btn[for="'+p.attr("id")+'"]');u.next(".ptb-submission-file-danger").remove();u.hide("blind",500,function(){if(d.error)e.html(p.data("label")),a(this).after(a('<span class="ptb-submission-file-danger ptb-submission-error-text"/>').text(d.error));
else{d.preview?(a(this).html(d.preview),0===a(this).closest(".ptb-submission-multi-text").length&&0===a(this).closest(".ptb-submission-module-req").length&&a(this).append('<span data-slug="'+p.attr("id")+'" class="fa fa-minus-circle ptb-submission-file-remove"></span>'),a(this).append('<span class="ptb-submission-file-name">'+d.name+"</span>").append('<span class="ptb-submission-file-size">'+g(d.size)+"</span>").width(c.previewMaxWidth).show("blind",500)):a(this).html("");var b=12<d.name.length?d.name.substring(0,
12)+"...":d.name;e.html("<span>"+b+"</span>")}});if(!d.error)for(var k=0;k<c.files.length;k++){var l=a(this).attr("id");f[l]=c.files[k];h[l]=b.delegateTarget.name}})})},x=function(){a("body").on("click",".ptb_module .ptb-submission-file-remove",function(c){c.preventDefault();c=a(this).closest(".ptb-submission-priview");var b=c.find(".ptb-submission-file-wrap"),l=a(this).data("slug");r(b,l,c)})},r=function(c,b,l){l.hide("blind",500,function(){a(this).empty()});delete h[b];delete f[b];c.html(c.html());
b=a('.ptb-submission-upload-btn[for="'+b+'"');b.html(b.data("label"));q(c.find(".ptb-submission-file"))},y=function(){var c=[];a(".ptb-submission-autocomplete").each(function(){var b=a(this).data("slug"),l=a(this),m=a(this).data("post_type");c[b]={};a(this).autocomplete({minLength:2,source:function(e,k){var d=e.term;d in c[b]?k(c[b][d]):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:e.term,slug:b,post_type:m,action:"ptb_submission_terms"},success:function(a){c[b][d]=a;k(a)}})},focus:function(a,
b){a.preventDefault()},open:function(){a("ul.ui-menu").width(a(this).innerWidth())},select:function(a,b){l.val(b.item.label);l.next("input").val(b.item.value);return!1}})})},z=function(){var c=a(".ptb_post_tag");if(0<c.length){var b=[];c.each(function(){var c=a(this).find('input[type="text"]'),m=a(this).closest("form").children('input[name="post_type"]').val(),e=/.*?\[.*?\]\[(.+?)\]$/;c.each(function(){var c=a(this).prop("name").match(e);if(0===c.length||!c[1])return!1;c=c[1];b[c]={};a(this).autocomplete({minLength:2,
source:function(d,e){var p=d.term;p in b[c]?e(b[c][p]):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:d.term.split(/,\s*/).pop(),slug:c,post_type:m,action:"ptb_submission_tag_terms"},success:function(a){b[c][p]=a;e(a)}})},focus:function(a,b){a.preventDefault()},open:function(){a("ul.ui-menu").width(a(this).innerWidth())},select:function(b,c){var d=this.value.split(/,\s*/);if(-1===a.inArray(c.item.label,d))d.pop(),d.push(c.item.label),d.push(""),this.value=d.join(", "),console.log(d);else{var e=
d.indexOf(this.value.split(/,\s*/).pop());d[e]=null;this.value=d.join(", ")}return!1}})})})}},A=function(){var c=a(".ptb-submission-text-option input,.ptb-submission-text-option textarea");c.each(function(){var b=a(this).attr("name");b&&a(this).attr("name",b+"[]")});c=a(".ptb-submission-multi-text li");c.each(function(){if(0<a(this).find(".ptb-submission-priview").length){var b=t();a(this).find("label").prop("for",b);a(this).find('input[type="file"]').prop("id",b)}});c=c=null;a("body").on("click",
".ptb-submission-option-add",function(b){b.preventDefault();b.stopPropagation();var c=a(this).closest(".ptb-submission-multi-text");b=c.data("max");var m=c.find(".ptb-submission-text-option").length;if(!(b&&m>=b)){var e=c.find(".ptb-submission-text-option").first().clone(),c=c.children("ul");e.find("input,textarea").val("");e.find(".ptb-submission-required-error").removeClass("ptb-submission-required-error");var k=e.find(".ptb-submission-priview");a.event.trigger("ptb_submission_before_option_add",
e);if(0<k.length){var d=t();e.find(".ptb-submission-error-text").remove();var f=e.find("label");f.prop("for",d);f.html(f.data("label"));e.find('input[type="file"]').prop("id",d);k.empty().hide()}e.appendTo(c).hide().show("blind",500);0<k.length&&q(a("#"+d));a.event.trigger("ptb_submission_after_option_add",e);c.sortable("refresh");b&&m+1>=b&&a(this).fadeOut()}});a("body").on("click",".ptb-submission-remove",function(b){b.preventDefault();b.stopPropagation();b=a(this).closest(".ptb-submission-text-option");
var c=b.find(".ptb-submission-priview");if(0<c.length){var f=c.closest(".ptb-submission-text-option").find(".ptb-submission-file-wrap"),e=f.find("input").attr("id");r(f,e,c);if(1===b.closest("ul").children("li").length)return b.find("input").val(""),!1}c=a(this).closest(".ptb-submission-multi-text");f=c.data("max");e=c.find(".ptb-submission-text-option").length;f&&e-1<f&&c.find(".ptb-submission-option-add").fadeIn();b.hide("blind",500,function(){a(this).remove()})});v()},t=function(){return"ptb_submission_"+
Math.random().toString(36).substr(2,9)},B=function(){a(".ptb-submission-captcha-refresh").click(function(c){c.preventDefault();var b=a(this).closest("form");c=a(this).closest("table").find("img");b.addClass("ptb-submission-wait");c.attr("src",c.attr("src")).load(function(){b.removeClass("ptb-submission-wait")})})},C=function(){a("body").on("submit",".ptb-submission-form",function(c){c.preventDefault();var b=a(this),l=!0;c=b.find(".ptb-submission-module-req");var m=b.find(".ptb-submission-form-error");
b.find(".ptb-submission-required-error,.ptb-submission-label-required").removeClass("ptb-submission-required-error ptb-submission-label-required");b.find(".switch-html").trigger("click");c.each(function(){var c=a(this);c.find("input,select,textarea").each(function(){var b=!1,d=a(this).prop("name");if(!d)return!1;var e=a(this).closest(".ptb_module");if(a(this).is(":checkbox")||a(this).is(":radio")){if(0<c.find('[name^="'+d+'"]:checked').length)return!1;b=!0}else if(!a.trim(a(this).val())&&0==a(this).closest(".chosen-container").length){if(a.trim(e.find(".ptb-submission-priview").html()))return!1;
b=!0}var d=e.data("type"),k=a.event.trigger("ptb_submission_validate_"+d,[a(this),f]);console.log(d);"undefined"!==typeof k&&(b=k);b&&("captcha"===d&&e.hasClass("ptb-submission-google")?e.addClass("ptb-submission-required-error"):(a(this).addClass("ptb-submission-required-error"),c.addClass("ptb-submission-label-required")),l=!1)})});if(l)if(m.html(""),0<Object.keys(f).length){c=[];var m=[],e=a(".ptb-submission-multi-text");0<e.length&&e.find(">ul>li").each(function(){var c=a(this).find("input,textarea"),
b=a(this).index();c.each(function(){var c=a(this).prop("name");c&&(c=c.replace(/\[[0-9]*\]/i,"["+b+"]"),a(this).prop("name",c))})});for(var k in f)0<a("#"+k).closest(".ptb-submission-multi-text").length&&(e=a("#"+k).closest("li").index(),h[k]=h[k].replace(/\[[0-9]*\]/i,"["+e+"]")),m.push(h[k]),c.push(f[k]);b.addClass("ptb-submission-wait");a(".ptb-submission-file",b).fileupload("send",{files:c,paramName:m}).complete(function(){b.removeClass("ptb-submission-wait")}).success(function(a){w(a,b)})}else a.ajax({url:b.attr("action"),
type:"POST",dataType:"json",data:b.serialize(),beforeSend:function(){b.addClass("ptb-submission-wait")},complete:function(){b.removeClass("ptb-submission-wait")},success:function(a){w(a,b)}});else m.html(ptb_submission.errors)})},w=function(a,b){var c=b.find(".ptb-submission-errors"),f=b.find(".ptb-submission-form-error");c.html("");b.find(".ptb-submission-error-text").remove();if(a)if(a.success)if(a.r)window.location.href=a.success;else{var e=window.location.search?window.location.href+"&":window.location.href+
"?";e+="nonce="+a.nonce+"&form_id="+a.form_id;window.location.href=e}else if(a.fee)window.location.href=a.fee;else{var k=!1,d;for(d in a){if("captcha"===d)if("undefined"!==typeof grecaptcha&&0<b.find(".ptb-submission-google").length){grecaptcha.reset();k=!0;b.find(".ptb-submission-google").append('<div class="ptb-submission-error-text">'+a[d]+"</div>");continue}else b.find(".ptb-submission-captcha-refresh").trigger("click");"object"!==typeof a[d]&&(e=a[d],a[d]=[],a[d][0]=1);for(var h in a[d]){var p=
b.find('[name^="submission['+d+']"]'),g=0!==h&&1!==a[d][h]?a[d][h]:e;0===p.length&&(p=b.find('[name^="'+d+'"]'));0<p.length?(p.addClass("ptb-submission-required-error").closest(".ptb_module").addClass("ptb-submission-label-required"),p.first().closest(".ptb_back_active_module_input").append('<div class="ptb-submission-error-text">'+g+"</div>")):c.append("<div>"+g+"</div>")}}!1===k&&"undefined"!==typeof grecaptcha&&0<b.find(".ptb-submission-google").length&&grecaptcha.reset();f.html(ptb_submission.errors)}},
v=function(){a(".ptb-submission-multi-text>ul").sortable({placeholder:"ui-state-highlight"})},D=function(){a("body").on("focusout",".ptb_number input",function(){var c=parseFloat(a(this).prop("min")),b=parseFloat(a(this).prop("max")),f=parseFloat(a(this).val());f<c?a(this).val(c):f>b&&a(this).val(b);a(this).hasClass("ptb_number_min")?(b=parseFloat(a(this).closest(".ptb_module").find(".ptb_number_max").val()),b<=f&&a(this).val(b-1)):a(this).hasClass("ptb_number_max")&&(c=parseFloat(a(this).closest(".ptb_module").find(".ptb_number_min").val()),
c>=f&&a(this).val(c+1))})},E=function(){a("form.add_temp_tax").submit(function(c){c.preventDefault();var b=a(this);c=b.find('input[type="text"]');var f=!1,h=0<a(this).find(".ptb_language_tabs").length;b.find(".ptb-submission-error-text").remove();b.find(".ptb-submission-required-error").removeClass("ptb-submission-required-error");c.each(function(){if(!a.trim(a(this).val())){if(h){var b=a(this).closest(".ptb_back_active_module_input");0===b.find(".ptb-submission-error-text").length&&b.append('<span class="ptb-submission-error-text">'+
ptb_submission.tax_all_errors+"<span>")}f=!0;a(this).attr("placeholder",ptb_submission.tax_error).addClass("ptb-submission-required-error")}});if(f)return!1;a.ajax({url:b.prop("action"),data:b.serialize(),type:"POST",dataType:"json",beforeSend:function(){b.addClass("ptb-submission-wait")},complete:function(){b.removeClass("ptb-submission-wait");a("#lightcase-overlay").trigger("click")},success:function(b){if(b&&b.slug){var c=a("a#ptb_submission_lightbox_"+b.slug);var d=c.closest(".ptb_back_active_module_input");
var f=0<d.find("select").length,e=!f&&(0<d.find("input:radio").length||0<d.find("input:checkbox").length),h=!f&&!e&&0<d.find(".ptb-submission-autocomplete").length;if(b.exists)for(var g in b.exists)if(f){var l=d.find("select");l.prop("multiple")||l.find("option:selected").prop("selected",!1);l.find('option[value="'+g+'"]').prop("selected",!0)}else e?d.find("#ptb_tax_"+g).prop("checked",!0):h&&(d.find('input[type="text"]').val(b.exists[g].title),d.find('input[type="text"]').next("input").val(g));if(b.add){l=
a.unique(b.add[b.lng]);var n=e?0<d.find("input:radio").length?"radio":"checkbox":!1;for(g in l)if(f){var m=d.find('option[value="'+l[g].slug+'"]');d.find("select").prop("multiple")||d.find("option").removeAttr("selected");0<m.length?m.prop("selected",!0):d.find("select").prepend('<option value="'+l[g].slug+'" selected="selected">'+l[g].value+"</option>")}else e?("radio"===n&&d.find("input").prop("checked",!1),m=d.find('input[value="'+l[g].slug+'"]'),0<m.length?m.find("input").prop("checked","checked"):
d.prepend('<label class="ptb-submission-new-item"><input name="'+d.find("input[name]").first().prop("name")+'" value="'+l[g].slug+'" type="'+n+'" checked="checked" /><span>'+l[g].value+"</span></label>")):h&&d.find('input[type="text"]').val(l[g].value);var e={},q;for(q in b.add){e[q]=[];for(var r in b.add[q])e[q].push(b.add[q][r].value)}b=c.next("input");c=(c=b.val())?JSON.parse(window.atob(c)):[];for(g in c)for(var t in c[g])e[g].push(c[g][t]);b.val(window.btoa(JSON.stringify(e)))}f?d.find("select").trigger("chosen:updated").next(".chosen-container").find("a,ul").effect("highlight",
{},2E3):a(".ptb-submission-new-item").effect("highlight",{},2E3).removeClass("ptb-submission-new-item")}}})})};a(document).on("ptb_loaded",function(c,b){0<a(".ptb_is_single_lightbox .ptb_lightbox_add_tax").length&&(a(".ptb_is_single_lightbox").removeClass("ptb_is_single_lightbox").addClass("ptb_lightbox_add_tax_wrapper").find('input[type="text"]').each(function(){var b=a(this).attr("name");b&&a(this).attr("name",b+"[]")}),v(),E())});a(window).load(function(){n();q(a('input[type="file"].ptb-submission-file'));
x();y();z();a(".ptb-select").chosen({disable_search_threshold:7,search_contains:!0,width:"100%"});A();B();D();C();a("form.ptb-submission-form").each(function(){a(this).find(".ptb-submission-priview").each(function(){0<a(this).children("*").length&&a(this).show()})})})})(jQuery);
