var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
(function(a){a(document).ready(function(){a(".ptb_relation_multiply").each(function(){var c=a(this),b=a(this).closest(".ptb_relation_autocomplete_wrap").find('input[type="hidden"]');a(this).children("ul").sortable({items:"li",connectWith:c,placeholder:"ptb_relation_ui_state_highlight",cursor:"move",revert:100,sort:function(c,b){a(".ptb_relation_ui_state_highlight").height(b.item.outerHeight(!0)).width(b.item.outerWidth(!0))},stop:function(d,e){var f=[];c.find("li").each(function(){f.push(a(this).data("id"))});
b.val(f.join(", "))}})});a(".ptb_relation_autocomplete").each(function(){var c=a(this),b=a(this).closest(".ptb_relation_autocomplete_wrap"),d=b.find('input[type="hidden"]'),e=a(this).data("multiply"),f=a(this).data("ajax");a(this).autocomplete({minLength:2,source:function(b,c){var d=a.trim(b.term);a.getJSON(f,{term:d},function(a,b,d){c(a)})},select:function(f,g){if(e){var k=d.val().split(", ");-1===a.inArray(g.item.id.toString(),k)&&(k.push(g.item.id),d.val(k.join(", ")),c.val(""),b.find("ul").append('<li><span class="ptb_relation_term">'+
g.item.value+'</span><span data-id="'+g.item.id+'" class="ti-close ptb_relation_remove_term"></span></li>'))}else d.val(g.item.id),this.value=g.item.value;return!1}}).focus(function(){a(this).autocomplete("search")})});a(".ptb_relation_many").delegate(".ptb_relation_remove_term","click",function(c){c.preventDefault();if(confirm(ptb_relation.confirm)){c=a(this).closest(".ptb_relation_autocomplete_wrap").find('input[type="hidden"]');var b=a.trim(c.val()).split(", "),d=b.indexOf(a(this).data("id").toString());
a(this).closest("li").remove();-1!==d&&(b.splice(d,1),c.val(b.join(", ")))}});a.expr[":"].contains=a.expr.createPseudo(function(c){return function(b){return 0<=a(b).text().toUpperCase().indexOf(c.toUpperCase())}});a("body").delegate(".ptb_relation_searh_posts","keyup",function(){var c=a.trim(a(this).val()),b=a(this).closest("form").find(".ptb_relation_posts_wrap label");c?(b.hide(),b.filter(":contains("+c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").toUpperCase()+")").show()):b.show()});
a("body").delegate(".ptb_relation_uncheck","click",function(c){c.preventDefault();a(this).closest("form").find(".ptb_relation_posts_wrap input").removeAttr("checked")});a("body").delegate("#ptb_relation_select_posts","submit",function(c){c.preventDefault();c=a(this).serializeArray();var b=a(".ptb_current_ajax").closest(".ptb_relation_autocomplete_wrap"),d=b.find('input[type="hidden"]'),e=b.find("input.ptb_relation_autocomplete"),f=e.data("multiply"),l=d.val().split(", "),g="",k;for(k in c){var h=
c[k];h=h.value.toString();-1===a.inArray(h,l)&&(l.push(h),f&&(g+='<li><span class="ptb_relation_term">'+a("#ptb-related-post-"+h).closest("label").text()+'</span><span data-id="'+h+'" class="ti-close ptb_relation_remove_term"></span></li>'))}if(g||!f)f?b.find("ul").append(g):e.val(a.trim(a("#ptb-related-post-"+h).closest("label").text())),d.val(l.join(", "));a(".ptb_close_lightbox").trigger("click")})})})(jQuery);
