var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,b){a instanceof String&&(a=String(a));for(var c=a.length,d=0;d<c;d++){var h=a[d];if(e.call(b,h,d,a))return{i:d,v:h}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,b,c){if(e){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var d=a[c];d in b||(b[d]={});b=b[d]}a=a[a.length-1];c=b[a];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
(function(a){var e=function(){var b=[];a(".ptb-relation-autocomplete").each(function(){var c=a(this),d=c.data("post_type"),e=c.data("multyply");b[d]={};c.autocomplete({minLength:2,source:function(c,e){var f=c.term;f in b[d]?e(b[d][f]):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:c.term,post_type:d,action:"ptb_relation_submission_posts"},success:function(a){b[d][f]=a;e(a)}})},focus:function(a,b){c.autocomplete("search");return!1},open:function(){a("ul.ui-menu").width(a(this).innerWidth())},
select:function(b,d){var f=c.next("input");if(e){var g=f.val().split(", ");-1===a.inArray(d.item.id.toString(),g)&&(g.push(d.item.id),f.val(g.join(", ")),c.val(""),c.closest(".ptb_relation_multiply").find("ul").append('<li><span class="ptb_relation_term">'+d.item.label+'</span><span data-id="'+d.item.id+'" class="ti-close ptb_relation_remove_term"></span></li>'))}else c.val(d.item.label),f.val(d.item.id);return!1}})})};a(document).ready(function(){e();a(".ptb_relation_many").delegate(".ptb_relation_remove_term",
"click",function(b){b.preventDefault();if(confirm(ptb_relation.confirm)){b=a(this).closest(".ptb_relation_submission_wrap").find('input[type="hidden"]');var c=a.trim(b.val()).split(", "),d=c.indexOf(a(this).data("id").toString());a(this).closest("li").remove();-1!==d&&(c.splice(d,1),b.val(c.join(", ")))}})})})(jQuery);
